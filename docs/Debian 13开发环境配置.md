# Debian 13开发环境配置

## 1. 基础包安装与配置

1. 配置DEB822源

    ```shell
    sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak
    ```

    ```shell
    echo 'Types: deb
    URIs: https://mirrors.ustc.edu.cn/debian
    Suites: trixie trixie-updates trixie-backports
    Components: main contrib non-free non-free-firmware
    Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg

    Types: deb
    URIs: https://mirrors.ustc.edu.cn/debian-security
    Suites: trixie-security
    Components: main contrib non-free non-free-firmware
    Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg' | sudo tee /etc/apt/sources.list.d/debian.sources
    ```

2. 卸载无用包

    ```shell
    sudo apt remove -y gnome-calendar gnome-contacts gnome-weather gnome-clocks gnome-maps gnome-music simple-scan libreoffice-* totem malcontent gnome-tour shotwell gnome-sound-recorder evolution evolution-data-server gnome-software gnome-text-editor im-config vim-tiny xterm && sudo apt autoremove -y
    ```

3. 更新包

    ```shell
    sudo apt update && sudo apt upgrade -y
    ```

4. 基础包安装

    ```shell
    sudo apt install -y git vim zsh ibus-rime openssh-server curl build-essential cmake autoconf ninja-build tcl tk
    ```

5. 安装LLVM

    ```shell
    sudo apt install -y clang-format clang-tidy clang-tools clang clangd libc++-dev libc++1 libc++abi-dev libc++abi1 libclang-dev libclang1 liblldb-dev libllvm-ocaml-dev libomp-dev libomp5 lld lldb llvm-dev llvm-runtime llvm python3-clang
    ```

6. 安装并配置KVM

    ```shell
    sudo apt install -y qemu-system-x86 virt-manager libvirt-daemon-system virtinst libvirt-clients bridge-utils virtiofsd
    ```

    ```shell
    sudo systemctl enable libvirtd && sudo usermod -aG kvm ${USER} && sudo usermod -aG libvirt ${USER}
    ```

    ```shell
    mkdir -p ~/KVM/isos ~/KVM/images ~/KVM/shares
    ```

7. 安装并配置wireshark

    ```shell
    sudo apt install -y wireshark
    ```

    ```shell
    sudo chgrp wireshark /usr/bin/dumpcap && sudo chmod 4755 /usr/bin/dumpcap && sudo gpasswd -a ${USER} wireshark
    ```

8. 安装vlc

    ```shell
    sudo apt install -y vlc
    ```

9. 安装Clash Client

    ```shell
    sudo apt install -y libayatana-appindicator3-1 && 
    sudo dpkg -i ~/Downloads/Clash.Verge*.deb
    ```

10. 系统配置

    ```shell
    echo '#  File generated by update-locale
    LANG="en_US.UTF-8"
    LANGUAGE="en_US:en"
    LC_ALL="en_US.UTF-8"' | sudo tee /etc/default/locale && sudo update-locale
    ```

    ```shell
    sudo cp /etc/default/grub /etc/default/grub.blk && 
    sudo sed -i 's/GRUB_TIMEOUT=5/GRUB_TIMEOUT=0/g' /etc/default/grub && 
    sudo update-grub
    ```

    设置登录缩放

    ```shell
    sudo cp ~/.config/monitors.xml /var/lib/gdm3/.config
    ```

    设置头像

    ```shell
    sudo cp ~/Projects/dev-env/config/avatar-wang.jpg /usr/share/pixmaps/faces
    ```

## 2. Java开发环境搭建

1. 配置环境变量

    ```shell
    echo '
    export PATH=/usr/local/texlive/2025/bin/x86_64-linux:$PATH
    export MANPATH=/usr/local/texlive/2025/texmf-dist/doc/man:$MANPATH
    export INFOPATH=/usr/local/texlive/2025/texmf-dist/doc/info:$INFOPATH

    JAVA_HOME=~/.softwares/java/current
    GRADLE_HOME=~/.softwares/gradle/current
    MAVEN_HOME=~/.softwares/maven/current
    JMETER_HOME=~/.softwares/jmeter
    VISUALVM_HOME=~/.softwares/visualvm

    PATH=$JAVA_HOME/bin:$GRADLE_HOME/bin:$MAVEN_HOME/bin:$JMETER_HOME/bin:$VISUALVM_HOME/bin:$PATH

    export JAVA_HOME GRADLE_HOME MAVEN_HOME JMETER_HOME VISUALVM_HOME PATH' | tee -a ~/.profile
    ```

2. 安装

    ```shell
    mkdir -p ~/.softwares/java/oracle ~/.softwares/java/liberica ~/.softwares/gradle ~/.softwares/maven && 
    tar -zxvf ~/Downloads/jdk-21*.tar.gz -C ~/.softwares/java/oracle && 
    ln -s ~/.softwares/java/oracle/jdk-21* ~/.softwares/java/current && 
    tar -zxvf ~/Downloads/jdk-25*.tar.gz -C ~/.softwares/java/oracle && 
    tar -zxvf ~/Downloads/bellsoft-jdk21*.tar.gz -C ~/.softwares/java/liberica && 
    tar -zxvf ~/Downloads/bellsoft-jdk25*.tar.gz -C ~/.softwares/java/liberica && 
    unzip ~/Downloads/gradle*.zip -d ~/.softwares/gradle && 
    ln -s ~/.softwares/gradle/gradle*/ ~/.softwares/gradle/current && 
    tar -zxvf ~/Downloads/apache-maven*.tar.gz -C ~/.softwares/maven && 
    ln -s ~/.softwares/maven/apache-maven* ~/.softwares/maven/current && 
    tar -zxvf ~/Downloads/apache-jmeter*.tgz -C ~/.softwares && 
    mv ~/.softwares/apache-jmeter* ~/.softwares/jmeter && 
    unzip ~/Downloads/visualvm*.zip -d ~/.softwares && 
    mv ~/.softwares/visualvm* ~/.softwares/visualvm 
    ```

## 3. 桌面环境配置

1. 配置SSH

    ```shell
    ssh-keygen -t rsa -b4096 -C "comrade.lijing@gmail.com" && cat ~/.ssh/id_rsa.pub
    ```

2. 配置git

    ```shell
    git config --global user.email "comrade.lijing@gmail.com" && git config --global user.name "Comrade Li"
    ```

3. 拉取个人配置

    ```shell
    git clone git@github.com:comrade-li/dev-env.git ~/Projects/dev-env
    ```

4. 配置字体和vim

    ```shell
    cd ~/Projects/dev-env/fonts && 
    sudo tar -xJf fira-code.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf hack.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf intel-one-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf jetbrains-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf sf-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf source-code-pro.tar.xz -C /usr/share/fonts/truetype && 
    sudo fc-cache -f && fc-cache -f
    ```

    ```shell
    sudo cp ~/Projects/dev-env/config/.vimrc /root && cp ~/Projects/dev-env/config/.vimrc ~
    ```

5. 安装yaru主题

    ```shell
    sudo apt install -y gnome-shell-extension-user-theme 
    ```

    ```shell
    sudo apt install -y gtk2-engines-pixbuf gtk2-engines-murrine gnome-themes-extra
    ```

    ```shell
    sudo dpkg -i ~/Projects/dev-env/debs/session-migration_0.3.9build1_amd64.deb
    ```

    ```shell
    sudo dpkg -i ~/Projects/dev-env/debs/yaru-theme-*.deb
    ```

6. 安装配置dash-to-dock插件

    ```shell
    sudo apt install -y gnome-shell-extension-dashtodock
    ```

7. 安装配置oh-my-zsh

    1.安装oh-my-zsh

    ```shell
    git clone https://github.com/ohmyzsh/ohmyzsh.git ~/.oh-my-zsh
    ```

    2.安装插件

    ```shell
    git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/plugins/zsh-syntax-highlighting
    ```

    ```shell
    git clone https://github.com/zsh-users/zsh-autosuggestions.git ~/.oh-my-zsh/plugins/zsh-autosuggestions
    ```

    3.配置~/.zshrc

    ```shell
    cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc && 
    sed -i 's/plugins=(git)/plugins=(\n  git\n  zsh-autosuggestions\n  zsh-syntax-highlighting\n)\nsource ~\/.profile/g' ~/.zshrc
    ```

    4.更换默认sh为zsh

    ```shell
    chsh -s $(which zsh)
    ```

8. 配置输入法oh-my-rime

    1.下载

    ```shell
    git clone https://github.com/Mintimate/oh-my-rime.git ~/.config/ibus/rime
    ```

    2.修改配置

    ```shell
    cp ~/.config/ibus/rime/ibus_rime.yaml ~/.config/ibus/rime/ibus_rime.yaml.bak && 
    cp ~/.config/ibus/rime/rime_mint.schema.yaml ~/.config/ibus/rime/rime_mint.schema.yaml.bak && 
    sed -i 's/  horizontal: true/  horizontal: false/g' ~/.config/ibus/rime/ibus_rime.yaml && 
    sed -i '/^  - name: emoji_suggestion/,+2d' ~/.config/ibus/rime/rime_mint.schema.yaml
    ```

9. 卸载firefox-esr并删除无用文件

    ```shell
    sudo apt remove firefox-esr && 
    sudo apt autoremove &&
    rm -rf ~/.face ~/.face.icon ~/.mozilla ~/.cache/mozilla ~/.bash_history ~/.config/evolution ~/.cache/evolution ~/.local/share/evolution

10. 安装配置Eclipse、STS和Postman

    1.Eclipse配置

    ```shell
    cp ~/Projects/dev-env/config/eclipse.desktop ~/.local/share/applications && 
    sudo desktop-file-install ~/.local/share/applications/eclipse.desktop
    ```

    2.STS配置

    ```shell
    cp ~/Projects/dev-env/config/spring-tool-suite-4.desktop ~/.local/share/applications && 
    sudo desktop-file-install ~/.local/share/applications/spring-tool-suite-4.desktop
    ```

    3.Postman配置

    ```shell
    cp ~/Projects/dev-env/config/postman.desktop ~/.local/share/applications && 
    sudo desktop-file-install ~/.local/share/applications/postman.desktop
    ```
