# Debian 13开发环境配置

## 1. 基础环境安装与配置

1. 配置源

    ```shell
    sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak
    ```

    ```shell
    echo 'Types: deb
    URIs: https://mirrors.ustc.edu.cn/debian
    Suites: trixie trixie-updates trixie-backports
    Components: main contrib non-free non-free-firmware
    Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg

    Types: deb
    URIs: https://mirrors.ustc.edu.cn/debian-security
    Suites: trixie-security
    Components: main contrib non-free non-free-firmware
    Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg' | sudo tee /etc/apt/sources.list.d/debian.sources
    ```

2. 卸载无用包

    ```shell
    sudo apt remove -y gnome-calendar gnome-contacts gnome-weather gnome-clocks gnome-maps gnome-music simple-scan libreoffice-* totem malcontent gnome-tour shotwell gnome-sound-recorder evolution evolution-data-server gnome-software gnome-text-editor im-config vim-tiny xterm && sudo apt autoremove -y
    ```

3. 更新包

    ```shell
    sudo apt update && sudo apt upgrade -y
    ```

4. 基础包安装

    ```shell
    sudo apt install -y git git-lfs vim tree zsh ibus-rime openssh-server curl build-essential autoconf ninja-build tcl tk lm-sensors fancontrol i2c-tools
    ```

5. 安装LLVM

    ```shell
    sudo apt install -y clang-format clang-tidy clang-tools clang clangd libc++-dev libc++1 libc++abi-dev libc++abi1 libclang-dev libclang1 liblldb-dev libllvm-ocaml-dev libomp-dev libomp5 lld lldb llvm-dev llvm-runtime llvm python3-clang
    ```

6. 安装并配置KVM

    ```shell
    sudo apt install -y qemu-system-x86 virt-manager libvirt-daemon-system virtinst libvirt-clients bridge-utils virtiofsd
    ```

    ```shell
    sudo systemctl enable libvirtd && sudo usermod -aG kvm ${USER} && sudo usermod -aG libvirt ${USER} && 
    mkdir -p ~/KVM/images
    ```

7. 安装并配置wireshark

    ```shell
    sudo apt install -y wireshark
    ```

    ```shell
    sudo chgrp wireshark /usr/bin/dumpcap && sudo chmod 4755 /usr/bin/dumpcap && sudo gpasswd -a ${USER} wireshark
    ```

8. 安装vlc

    ```shell
    sudo apt install -y vlc
    ```

9. 系统配置

    ```shell
    echo '#  File generated by update-locale
    LANG="en_US.UTF-8"
    LANGUAGE="en_US:en"
    LC_ALL="en_US.UTF-8"' | sudo tee /etc/default/locale && sudo update-locale
    ```

    配置grub

    ```shell
    sudo cp /etc/default/grub /etc/default/grub.blk && 
    sudo sed -i 's/GRUB_TIMEOUT=5/GRUB_TIMEOUT=0/g' /etc/default/grub && 
    sudo update-grub
    ```

    设置登录缩放

    ```shell
    sudo cp ~/.config/monitors.xml /var/lib/gdm3/.config
    ```

10. 挂载硬盘

    ```shell
    sudo mkdir -p /datas && 
    sudo chown ${USER} /datas && 
    sudo mount /dev/sda1 /datas && 
    echo '
    UUID=bc14161f-d0e7-4474-8b13-6f3ee84488f3     /datas      btrfs   defaults,user     0     0' | sudo tee -a /etc/fstab
    ```

11. 安装Clash Client

    ```shell
    cp /datas/debs/GGDD.yaml ~/.config && 
    sudo apt install -y libayatana-appindicator3-1 && 
    sudo dpkg -i /datas/debs/Clash.Verge*.deb
    ```

12. 安装yaru主题

    ```shell
    sudo apt install -y gnome-shell-extension-user-theme gtk2-engines-pixbuf gtk2-engines-murrine gnome-themes-extra
    ```

    ```shell
    sudo dpkg -i /datas/debs/session-migration*.deb && 
    sudo dpkg -i /datas/debs/yaru-theme-*.deb
    ```

13. 安装配置dash-to-dock插件

    ```shell
    sudo apt install -y gnome-shell-extension-dashtodock
    ```

## 2. Java、go开发环境搭建

1. 配置环境变量

    ```shell
    echo '
    export PATH=/usr/local/texlive/2025/bin/x86_64-linux:$PATH
    export MANPATH=/usr/local/texlive/2025/texmf-dist/doc/man:$MANPATH
    export INFOPATH=/usr/local/texlive/2025/texmf-dist/doc/info:$INFOPATH

    CMAKE_HOME=~/.softwares/cmake/current

    GOROOT=~/.softwares/go/current

    JAVA_HOME=~/.softwares/java/current
    GRADLE_HOME=~/.softwares/gradle/current
    MVND_HOME=~/.softwares/mvnd/current
    JMETER_HOME=~/.softwares/jmeter
    VISUALVM_HOME=~/.softwares/visualvm

    PATH=$CMAKE_HOME/bin:$GOROOT/bin:$JAVA_HOME/bin:$GRADLE_HOME/bin:$MVND_HOME/bin:$JMETER_HOME/bin:$VISUALVM_HOME/bin:$PATH

    export CMAKE_HOME GOROOT JAVA_HOME GRADLE_HOME MVND_HOME JMETER_HOME VISUALVM_HOME PATH' | tee -a ~/.profile
    ```

2. 安装

    ```shell
    mkdir -p ~/.softwares/cmake ~/.softwares/go ~/.softwares/java/oracle ~/.softwares/java/liberica ~/.softwares/gradle ~/.softwares/mvnd  && 
    tar -zxf /datas/softwares/cmake*.tar.gz -C ~/.softwares/cmake && 
    ln -sf ~/.softwares/cmake/cmake-* ~/.softwares/cmake/current && 
    tar -zxf /datas/softwares/go1.25*.tar.gz -C ~/.softwares/go --transform="s/go/"$(basename -s .tar.gz "$(find /datas/softwares -name "go1.25*")")"/" && 
    tar -zxf /datas/softwares/go1.24*.tar.gz -C ~/.softwares/go --transform="s/go/"$(basename -s .tar.gz "$(find /datas/softwares -name "go1.24*")")"/" && 
    ln -sf ~/.softwares/go/go1.25* ~/.softwares/go/current && 
    tar -zxf /datas/softwares/jdk-21*.tar.gz -C ~/.softwares/java/oracle &&  
    tar -zxf /datas/softwares/jdk-25*.tar.gz -C ~/.softwares/java/oracle && 
    tar -zxf /datas/softwares/bellsoft-jdk21*.tar.gz -C ~/.softwares/java/liberica && 
    tar -zxf /datas/softwares/bellsoft-jdk25*.tar.gz -C ~/.softwares/java/liberica && 
    ln -sf ~/.softwares/java/oracle/jdk-21* ~/.softwares/java/current && 
    unzip -qq /datas/softwares/gradle*.zip -d ~/.softwares/gradle && 
    ln -sf ~/.softwares/gradle/gradle*/ ~/.softwares/gradle/current && 
    tar -zxf /datas/softwares/maven-mvnd*.tar.gz -C ~/.softwares/mvnd && 
    ln -sf ~/.softwares/mvnd/maven-mvnd* ~/.softwares/mvnd/current && 
    tar -zxf /datas/softwares/apache-jmeter*.tgz -C ~/.softwares && 
    mv ~/.softwares/apache-jmeter* ~/.softwares/jmeter && 
    unzip -qq /datas/softwares/visualvm*.zip -d ~/.softwares && 
    mv ~/.softwares/visualvm* ~/.softwares/visualvm
    ```

## 3. 桌面环境配置

1. 配置SSH

    ```shell
    ssh-keygen -t rsa -b4096 -C "comrade.lijing@gmail.com" && cat ~/.ssh/id_rsa.pub
    ```

2. 配置git

    ```shell
    git config --global user.email "comrade.lijing@gmail.com" && git config --global user.name "Comrade Li"
    ```

3. 拉取个人配置

    ```shell
    git clone git@github.com:comrade-li/dev-env.git ~/Projects/dev-env
    ```

4. 配置字体

    ```shell
    sudo tar -xJf /datas/fonts/adobe-fonts.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/anonymous-pro.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/cascadia-code.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/chivo-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/courier-prime.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/dm-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/fira-code.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/geist-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/github-monaspace.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/google-sans-code.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/hack.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/ibm-plex-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/inconsolata.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/intel-one-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/inter.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/jetbrains-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/lxgw-wenkai.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/noto-sans-sc.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/noto-sans.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/noto-serif-sc.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/noto-serif.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/roboto-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/sf-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/source-code-pro.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/space-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/suse-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/ubuntu-sans-mono.tar.xz -C /usr/share/fonts/truetype && 
    sudo tar -xJf /datas/fonts/ubuntu-sans.tar.xz -C /usr/share/fonts/truetype && 
    sudo fc-cache -f && fc-cache -f
    ```

    安装Twitter Color Emoji

    ```shell
    sudo apt install -y ttf-bitstream-vera && 
    sudo dpkg -i /datas/debs/fonts-twemoji-svginot*.deb
    ```

    ```shell
    gsettings set org.gnome.desktop.interface font-antialiasing 'rgba' && 
    gsettings set org.gnome.desktop.interface font-hinting 'none' && 
    gsettings set org.gnome.desktop.interface font-rgba-order 'rgb' && 
    gsettings set org.gnome.desktop.interface font-name 'Inter 12' && 
    gsettings set org.gnome.desktop.interface document-font-name 'Noto Sans 12' && 
    gsettings set org.gnome.desktop.interface monospace-font-name 'Google Sans Code 14' && 
    mkdir -p ~/.config/fontconfig && 
    ln -s ~/Projects/dev-env/configs/fontconfig/fonts.conf ~/.config/fontconfig/fonts.conf && 
    sudo fc-cache -f && fc-cache -f
    ```

5. 配置vim

    ```shell
    sudo ln -sf ~/Projects/dev-env/configs/.vimrc /root/.vimrc && ln -sf ~/Projects/dev-env/configs/.vimrc ~/.vimrc
    ```

6. 设置头像

    ```shell
    sudo cp ~/Projects/dev-env/configs/avatar-wang.jpg /usr/share/pixmaps/faces
    ```

7. 安装配置oh-my-zsh

    1.安装oh-my-zsh

    ```shell
    git clone https://github.com/ohmyzsh/ohmyzsh.git ~/.oh-my-zsh
    ```

    2.安装插件

    ```shell
    git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/plugins/zsh-syntax-highlighting
    ```

    ```shell
    git clone https://github.com/zsh-users/zsh-autosuggestions.git ~/.oh-my-zsh/plugins/zsh-autosuggestions
    ```

    ```shell
    git clone https://github.com/zsh-users/zsh-completions.git ~/.oh-my-zsh/plugins/zsh-completions
    ```

    3.配置~/.zshrc并更换默认sh为zsh

    ```shell
    cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc && 
    sed -i 's/plugins=(git)/plugins=(\n  git\n  sudo\n  zsh-completions\n  zsh-autosuggestions\n  zsh-syntax-highlighting\n)\nsource ~\/.profile/g' ~/.zshrc && 
    chsh -s $(which zsh)
    ```

8. 配置输入法oh-my-rime

    1.下载

    ```shell
    git clone https://github.com/Mintimate/oh-my-rime.git ~/.config/ibus/rime
    ```

    2.修改配置

    ```shell
    cp ~/.config/ibus/rime/ibus_rime.yaml ~/.config/ibus/rime/ibus_rime.yaml.bak && 
    cp ~/.config/ibus/rime/rime_mint.schema.yaml ~/.config/ibus/rime/rime_mint.schema.yaml.bak && 
    sed -i 's/  horizontal: true/  horizontal: false/g' ~/.config/ibus/rime/ibus_rime.yaml && 
    sed -i '/^  - name: emoji_suggestion/,+2d' ~/.config/ibus/rime/rime_mint.schema.yaml
    ```

9. 卸载firefox-esr并删除无用文件

    ```shell
    sudo apt remove -y firefox-esr && 
    sudo apt autoremove && 
    rm -rf ~/.face ~/.face.icon ~/.mozilla ~/.cache/mozilla ~/.bash_history ~/.config/evolution ~/.cache/evolution ~/.local/share/evolution
    ```

10. 安装firefox

    ```shell
    sudo install -d -m 0755 /etc/apt/keyrings
    ```

    ```shell
    wget -q https://packages.mozilla.org/apt/repo-signing-key.gpg -O- | sudo tee /etc/apt/keyrings/packages.mozilla.org.asc > /dev/null
    ```

    ```shell
    echo 'Types: deb
    URIs: https://packages.mozilla.org/apt
    Suites: mozilla
    Components: main
    Signed-By: /etc/apt/keyrings/packages.mozilla.org.asc ' | sudo tee /etc/apt/sources.list.d/mozilla.sources
    ```

    ```shell
    echo 'Package: *
    Pin: origin packages.mozilla.org
    Pin-Priority: 1000' | sudo tee /etc/apt/preferences.d/mozilla
    ```

    ```shell
    sudo apt update && sudo apt install firefox
    ```

11. Postman安装与配置

    ```shell
    tar -zxf ~/Downloads/postman-linux-x64.tar.gz -C ~/.softwares && 
    cp ~/Projects/dev-env/configs/postman.desktop ~/.local/share/applications && 
    sudo desktop-file-install ~/.local/share/applications/postman.desktop
    ```
